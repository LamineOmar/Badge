<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>generer le badge</title>
    <link rel="stylesheet" href="badge.css">
    
</head>
<body>
    
    <section>
        <div id="logo">
            <div id="L1"><img src="./images/uca.png" alt=""></div>
            <div id="L2"><img src="./images/uca.png" alt=""></div>
        </div>

        <!-- entrer CNE-->
        <div id="form">
            <form>
                <label for="QR" > Entrer Votre CNE : </label><br>
                <input type="text" class="qr_text" id="QR" name="qr_text" > <br><br>
                
                   <!-- <option>FSSM</option>
                    <option>FSJES</option>
                    <option>ENCG</option>
                    <option>FMPM</option>
                    <option>FLSHM</option>
                    <option>FSTG</option>
                    <option>ENSA_MARRAKECH</option>
                    <option>ENS</option>
                    <option>FPS</option>
                    <option>ENSA_SAFI</option>
                    <option>EST_SAFI</option>
                    <option>ESTE</option>
                    <option>FSJESK</option>
                    <option>FLAM</option>
                    <option>ESTK</option>
                </select>-->
            </form><br>
            <input name="btnValide"id="btn"  type="submit"value="Vérifier"onclick="generateur()">
        </div>
        <div id="remarque"></div>
    </section>
    <!--generer badge-->

<div id="badge_btn">
<div id="b_btn">
    <div id="badge">

        <img src="./images/uca.png" alt="">
        <div id="ligne"></div><br><br>
        <div id="elements">
            <div>
               <h3><span id="faculte" class="element"></span></h3><br>
                <h3><span id="cne"class="element"></span></h3><br>
                <h3><span id="id"class="element"></span></h3><br>
                <h3><span id="nom"class="element"></span></h3><br>
                <h3><span id="prenom"class="element"></span></h3><br>
            </div>
            <div class="qr_code"></div>
        </div><br>
        
        <table border="2"cellpadding=10 cellspacing=3 >
            <caption><h2>بطاقة الصائم</h2></caption>
            
            <tr>
                <th> Lun </th>
                <th> Mar </th>
                <th> Mer </th>
                <th> Jeu </th>
                <th> Ven </th>
                <th> Sam </th>
                <th> Dim </th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td>22/03 <br><input type="checkbox"></td>
                <td>23/03 <br><input type="checkbox"></td>
                <td>24/03 <br><input type="checkbox"></td>
                <td>25/03 <br><input type="checkbox"></td>
                <td>26/03 <br><input type="checkbox"></td>
            </tr>
            <tr>
                <td>27/03 <br><input type="checkbox"></td>
                <td>28/03 <br><input type="checkbox"></td>
                <td>29/03 <br><input type="checkbox"></td>
                <td>30/03 <br><input type="checkbox"></td>
                <td>31/03 <br><input type="checkbox"></td>
                <td>01/04 <br><input type="checkbox"></td>
                <td>02/04 <br><input type="checkbox"></td>
                
            </tr>
            <tr>
                <td>03/04 <br><input type="checkbox"></td>
                <td>04/04 <br><input type="checkbox"></td>
                <td>05/04 <br><input type="checkbox"></td>
                <td>06/04 <br><input type="checkbox"></td>
                <td>07/04 <br><input type="checkbox"></td>
                <td>08/04 <br><input type="checkbox"></td>
                <td>09/04 <br><input type="checkbox"></td>
            </tr>
            <tr>
                <td>10/04 <br><input type="checkbox"></td>
                <td>11/04 <br><input type="checkbox"></td>
                <td>12/04 <br><input type="checkbox"></td>
                <td>13/04 <br><input type="checkbox"></td>
                <td>14/04 <br><input type="checkbox"></td>
                <td>15/04 <br><input type="checkbox"></td>
                <td>16/04 <br><input type="checkbox"></td>
            </tr>
            <tr>
                <td>17/04 <br><input type="checkbox"></td>
                <td>18/03 <br><input type="checkbox"></td>
                <td>19/03 <br><input type="checkbox"></td>
            </tr>
        </table>
    </div>
    <input type="button" value="télécharger"id="imprimer"onclick="imprimer()">
</div>
</div> 

    <script type="text/javascript">
        //les variables
        const qr_text =document.getElementById("QR");
        const form=document.querySelector("#form");
        const remarque=document.getElementById("remarque");
        const qrcode=document.querySelector(".qr_code");
        const badge=document.getElementById("badge");
        const cne=document.getElementById("cne");
        const id=document.getElementById("id");
        const nom=document.getElementById("nom");
        const prenom=document.getElementById("prenom");
        const faculte=document.getElementById("faculte");
        const imprime=document.getElementById("imprimer");
        const logo=document.getElementById("logo");
        //fonction generateur
        var stockCNE="g143048027",stockNOM="Lamine",stockPRENOM="Omar",stockFACULTE="FSSM",stockId="1";
        function generateur(){
            if(qr_text.value&&qr_text.value!='1'){
                badge.style.display="block";
                faculte.innerHTML="<b>Faculté : </b>"+stockFACULTE;
                cne.innerHTML="<b>CNE : </b>"+stockCNE;
                nom.innerHTML="<b>Nom : </b>"+stockNOM;
                prenom.innerHTML="<b>Prénom : </b>"+stockPRENOM;
                id.innerHTML="<b>Numéro : </b>"+stockId;
                qrcode.innerHTML=""//initialiser le contenu de qr code
                new QRCode(qrcode,qr_text.value.toUpperCase());/*qr_text.value*/
               form.style.display="none";
                imprime.style.display="block";
                remarque.innerHTML="S'il vous plait télécharger et imprimer votre  badge  ";
            }else{
                if(!qr_text.value){
                    remarque.innerHTML="Entrer votre CNE avant de cliquer sur le button <i><b>'Vérifier'</b></i>";
                }
                else if(qr_text.value=='1'){
                    remarque.innerHTML="votre CNE n'est pas correct ou vous éte maintenant dans la liste d'attende  <br> الرقم الوطني للطالب الذي أدخلته غير صحيح أو أنت الآن في لائحة الإنتظار ";
                }
        }
    }
        
        // verifier si il est dans BD et afficher ses informations
        /* function valider_saisi(){
            '<% for(i=0;i<CNE.length;i++) {%>'
           stockCNE='<%= CNE[i].CNE%>'   
           if(stockCNE==qr_text.value.toUpperCase()){
            stockNOM='<%= CNE[i].Nom%>' 
            stockPRENOM='<%= CNE[i].Prénom%>'
            stockFACULTE='<%= CNE[i].Faculté%>'
            stockId='<%= CNE[i].id_etudiant%>'
                return true;
            }
            ' <%}%>'
            return false;
        }*/
        //imprimer
        function imprimer(){
            imprime.style.display="none";
            remarque.style.display="none";
            logo.style.display="none";
            print();
        }
    </script>
    <script src="qrcode.min.js"></script>
</body>
</html>